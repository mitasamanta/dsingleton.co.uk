<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <title>Installing Playdar on OS X 10.4</title>

  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    
  <meta name="description" content="The blog of David Singleton, Ramblings of a Web Developer" />
  <link href='http://fonts.googleapis.com/css?family=Volkhov:400,700|Gentium+Book+Basic:400,700italic,400italic,700' rel='stylesheet' type='text/css'>
  <link href="/atom.xml" rel="alternate" title="David Singleton" type="application/atom+xml" />

  <link rel="stylesheet" href="/static/css/base.css" type="text/css" />
</head>

<body class="">
    
  <header id="header">
    <p>
      <span class="myname">
        <a class="name" href="/" ><span class="firstname">David</span> <span class="lastname">Singleton</span></a>
      </span>
      <br>
      <span class="aboutme">
        A <span class="title">web developer</span>
        living in <span class="adr"><span class="locality">London</span></span>.
      </span>
      <span class="tagline">I sometimes <a href="/blog">blog</a> &amp; write <a href="/code">code</a> &mdash; more <a href="/about">about me</a></span>
    </p>
  </header>

  <div id="main" role="main">
    <article class="post">
  
  <header>
    <h1>Installing Playdar on OS X 10.4</h1>
    <p class="post-info">
      <abbr class="published" title="2009-04-09 17:03:00 +0100">09 Apr 2009</abbr>
    </p>
  </header>

  <p>Congrutulations, you&#8217;re on an outdated verison of OS X, but you still want to play with cool things like Playdar. Here&#8217;s a hassle filled guide to compiling it from source.</p>

<p>To do this you&#8217;ll need XCode (2.4 for Tiger), Macports and Git to start.</p>

<ul>
  <li><a href="https://connect.apple.com/cgi-bin/WebObjects/MemberSite.woa/wa/getSoftware?bundleID=20262">XCode 2.4</a></li>
  <li><a href="http://www.macports.org/install.php">MacPorts</a></li>
  <li><a href="http://metastatic.org/source/git-osx.html">Git</a></li>
</ul>

<p>Once you&#8217;ve got those tools installed you can focus on Playdar itself. First, we need to load Playdar specific dependecies via mac ports. This is easy, but takes a little while.</p>

<pre><code>$ sudo port install cmake boost ossp-uuid uriparser taglib git-core sqlite3
</code></pre>

<p>Next grab playdar from Git;</p>

<pre><code>$ git clone git://github.com/RJ/playdar.git
$ cd playdar
</code></pre>

<p>Now to build it from source.</p>

<pre><code>$ cd build
$ cmake ..
</code></pre>

<p>I&#8217;m not 100% sure this is a 10.4 specific issue, but i&#8217;ve had the same thing happen on two machines. CMake will find an old version of sqlite that won&#8217;t compile with Playdar. The quickest hack is to move/backup the &#8220;incorrect&#8221;, sym-link the correct version in it&#8217;s place and then make as normal.</p>

<pre><code>$ sudo mv /usr/lib/libsqlite3.dylib{,.bk}
$ sudo ln -s /opt/local/lib/libsqlite3.dylib /usr/lib/libsqlite3.dylib
</code></pre>

<p>Finally we can compile the playdar bin itself.
$ make</p>

<p>Undo our sqlite path hack (if you had to do it)</p>

<pre><code>$ sudo mv -f /usr/lib/libsqlite3.dylib{.bk,} 
</code></pre>

<p>Make it!</p>

<pre><code>$ make
</code></pre>

<p>You should now have a playdar file in bin/. Hurrah, the hard bit is over now to do our DB setup and config.</p>

<pre><code>$ cd playdar 
</code></pre>

<p>I had this on one machine but not the other, use the normal instructions in INSTALL.txt unless you get an SQLite error about &#8220;NOT, in which case use this.</p>

<pre><code>$ sed 's/IF NOT EXISTS //' etc/schema.sql | sqlite3 ../collection.db
</code></pre>

<p>Load your music collection. Depending on the size this can take a while.</p>

<pre><code>$ ./bin/scanner ./collection.db ~/Music/MP3/
</code></pre>

<p>Run it.</p>

<pre><code>$ ./bin/playdar -c ./etc/playdar.conf
</code></pre>


  

</article>

  </div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-609105-1', 'dsingleton.co.uk');
    ga('send', 'pageview');

  </script>

</body>
</html>
